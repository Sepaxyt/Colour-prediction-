<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>53 Club - VIP</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');
        
        :root {
            --primary: #6a11cb;
            --secondary: #4a6bff;
            --dark: #121212;
            --light: #f8f9fa;
            --gray: #6c757d;
            --success: #28a745;
            --danger: #dc3545;
            --warning: #ffc107;
            --info: #17a2b8;
            --gold: #FFD700;
            --silver: #C0C0C0;
            --bronze: #CD7F32;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, var(--dark), #1a1a1a);
            color: var(--light);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 20px;
        }
        
        .logo {
            display: flex;
            align-items: center;
        }
        
        .logo-img {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, var(--secondary), var(--primary));
            border-radius: 12px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.5rem;
            font-weight: bold;
            color: white;
            margin-right: 10px;
        }
        
        .logo h1 {
            font-size: 1.5rem;
            background: linear-gradient(to right, var(--secondary), var(--primary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .back-btn {
            color: var(--light);
            text-decoration: none;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
        }
        
        .back-btn i {
            margin-right: 5px;
        }
        
        .vip-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 20px;
        }
        
        .vip-header {
            text-align: center;
            margin-bottom: 30px;
            width: 100%;
        }
        
        .vip-title {
            font-size: 2rem;
            background: linear-gradient(to right, var(--gold), var(--warning));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }
        
        .vip-subtitle {
            color: var(--gray);
            margin-bottom: 20px;
        }
        
        .vip-status {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 30px;
            width: 100%;
            max-width: 800px;
        }
        
        .vip-user {
            display: flex;
            align-items: center;
        }
        
        .vip-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--secondary), var(--primary));
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-size: 1.5rem;
            font-weight: bold;
            margin-right: 15px;
        }
        
        .vip-user-info h3 {
            font-size: 1.2rem;
            margin-bottom: 5px;
        }
        
        .vip-user-info p {
            color: var(--gray);
            font-size: 0.9rem;
        }
        
        .vip-level {
            text-align: right;
        }
        
        .vip-level-number {
            font-size: 2rem;
            font-weight: bold;
            background: linear-gradient(to right, var(--gold), var(--warning));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .vip-level-label {
            color: var(--gray);
            font-size: 0.9rem;
        }
        
        .vip-progress-container {
            width: 100%;
            max-width: 800px;
            margin-bottom: 40px;
        }
        
        .vip-progress-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        
        .vip-progress-title {
            font-size: 1.1rem;
            font-weight: 500;
        }
        
        .vip-progress-stats {
            color: var(--gray);
            font-size: 0.9rem;
        }
        
        .vip-progress-bar {
            height: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            overflow: hidden;
            margin-bottom: 5px;
        }
        
        .vip-progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--secondary), var(--primary));
            border-radius: 5px;
            transition: width 0.5s ease;
        }
        
        .vip-progress-goal {
            text-align: right;
            color: var(--gray);
            font-size: 0.8rem;
        }
        
        .vip-benefits {
            width: 100%;
            max-width: 800px;
            margin-bottom: 30px;
        }
        
        .benefits-title {
            font-size: 1.5rem;
            margin-bottom: 20px;
            text-align: center;
            color: var(--gold);
        }
        
        .vip-tiers {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .vip-tier {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 20px;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        .vip-tier:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }
        
        .vip-tier.active {
            border: 2px solid var(--gold);
        }
        
        .vip-tier-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .vip-tier-level {
            font-size: 1.2rem;
            font-weight: bold;
        }
        
        .vip-tier-level.vip-1 {
            color: var(--bronze);
        }
        
        .vip-tier-level.vip-2 {
            color: var(--silver);
        }
        
        .vip-tier-level.vip-3 {
            color: var(--gold);
        }
        
        .vip-tier-badge {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.2rem;
        }
        
        .vip-tier-badge.vip-1 {
            background: linear-gradient(135deg, var(--bronze), #8B4513);
            color: white;
        }
        
        .vip-tier-badge.vip-2 {
            background: linear-gradient(135deg, var(--silver), #A8A8A8);
            color: white;
        }
        
        .vip-tier-badge.vip-3 {
            background: linear-gradient(135deg, var(--gold), #DAA520);
            color: white;
        }
        
        .vip-tier-requirements {
            margin-bottom: 15px;
            font-size: 0.9rem;
        }
        
        .vip-tier-requirements span {
            color: var(--success);
            font-weight: 500;
        }
        
        .vip-tier-benefits {
            margin-bottom: 15px;
        }
        
        .benefit-item {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
            font-size: 0.9rem;
        }
        
        .benefit-item i {
            margin-right: 8px;
            color: var(--success);
        }
        
        .claim-reward-btn {
            width: 100%;
            padding: 10px;
            background: linear-gradient(to right, var(--secondary), var(--primary));
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 10px;
        }
        
        .claim-reward-btn:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }
        
        .claim-reward-btn:disabled {
            background: var(--gray);
            cursor: not-allowed;
            transform: none;
        }
        
        .vip-rewards {
            width: 100%;
            max-width: 800px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 30px;
        }
        
        .rewards-title {
            font-size: 1.5rem;
            margin-bottom: 20px;
            text-align: center;
            color: var(--gold);
        }
        
        .monthly-reward {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            margin-bottom: 15px;
        }
        
        .reward-info h4 {
            font-size: 1.1rem;
            margin-bottom: 5px;
        }
        
        .reward-info p {
            color: var(--gray);
            font-size: 0.9rem;
        }
        
        .reward-amount {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--gold);
        }
        
        .reward-time {
            color: var(--gray);
            font-size: 0.8rem;
            margin-top: 5px;
            text-align: right;
        }
        
        .reward-claim-btn {
            padding: 8px 15px;
            background: linear-gradient(to right, var(--success), #5cb85c);
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .reward-claim-btn:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }
        
        .reward-claim-btn:disabled {
            background: var(--gray);
            cursor: not-allowed;
            transform: none;
        }
        
        /* Toast Notification */
        .toast {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: var(--success);
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 1001;
            display: flex;
            align-items: center;
            animation: toastFadeIn 0.3s ease, toastFadeOut 0.3s ease 2.7s forwards;
        }
        
        @keyframes toastFadeIn {
            from { opacity: 0; transform: translateX(-50%) translateY(20px); }
            to { opacity: 1; transform: translateX(-50%) translateY(0); }
        }
        
        @keyframes toastFadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }
        
        .toast.error {
            background-color: var(--danger);
        }
        
        .toast.warning {
            background-color: var(--warning);
            color: var(--dark);
        }
        
        .toast.info {
            background-color: var(--info);
        }
        
        .toast-icon {
            margin-right: 10px;
            font-size: 1.2rem;
        }
        
        /* Responsive styles */
        @media (max-width: 768px) {
            .vip-status {
                flex-direction: column;
                text-align: center;
            }
            
            .vip-user {
                margin-bottom: 15px;
                flex-direction: column;
                text-align: center;
            }
            
            .vip-avatar {
                margin-right: 0;
                margin-bottom: 10px;
            }
            
            .vip-level {
                text-align: center;
            }
            
            .vip-tiers {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <a href="profile.html" class="back-btn">
                <i class="fas fa-arrow-left"></i> Back
            </a>
            
            <div class="logo">
                <div class="logo-img">53</div>
                <h1>53 Club</h1>
            </div>
            
            <div style="width: 60px;"> <!-- Spacer for alignment --> </div>
        </header>
        
        <div class="vip-container">
            <div class="vip-header">
                <h2 class="vip-title">VIP Club</h2>
                <p class="vip-subtitle">Exclusive rewards and benefits for our most valued players</p>
            </div>
            
            <div class="vip-status">
                <div class="vip-user">
                    <div class="vip-avatar" id="vip-avatar">M</div>
                    <div class="vip-user-info">
                        <h3 id="vip-username">Loading...</h3>
                        <p id="vip-userid">Member ID: Loading...</p>
                    </div>
                </div>
                
                <div class="vip-level">
                    <div class="vip-level-number" id="vip-current-level">1</div>
                    <div class="vip-level-label">Current VIP Level</div>
                </div>
            </div>
            
            <div class="vip-progress-container">
                <div class="vip-progress-header">
                    <div class="vip-progress-title">Progress to Next Level</div>
                    <div class="vip-progress-stats" id="vip-progress-text">₹0 / ₹3,000</div>
                </div>
                <div class="vip-progress-bar">
                    <div class="vip-progress-fill" id="vip-progress-fill" style="width: 0%"></div>
                </div>
                <div class="vip-progress-goal">Next Level: VIP <span id="vip-next-level">2</span></div>
            </div>
            
            <div class="vip-benefits">
                <h3 class="benefits-title">VIP Tiers & Benefits</h3>
                
                <div class="vip-tiers">
                    <div class="vip-tier" id="vip-tier-1">
                        <div class="vip-tier-header">
                            <div class="vip-tier-level vip-1">VIP 1</div>
                            <div class="vip-tier-badge vip-1">1</div>
                        </div>
                        <div class="vip-tier-requirements">Requirement: <span>₹3,000</span> total bet</div>
                        <div class="vip-tier-benefits">
                            <div class="benefit-item"><i class="fas fa-check-circle"></i> Level Up Reward: ₹60</div>
                            <div class="benefit-item"><i class="fas fa-check-circle"></i> Monthly Reward: ₹30</div>
                            <div class="benefit-item"><i class="fas fa-check-circle"></i> Exclusive VIP Badge</div>
                        </div>
                        <button class="claim-reward-btn" id="claim-tier-1" disabled>Claim Reward</button>
                    </div>
                    
                    <div class="vip-tier" id="vip-tier-2">
                        <div class="vip-tier-header">
                            <div class="vip-tier-level vip-2">VIP 2</div>
                            <div class="vip-tier-badge vip-2">2</div>
                        </div>
                        <div class="vip-tier-requirements">Requirement: <span>₹10,000</span> total bet</div>
                        <div class="vip-tier-benefits">
                            <div class="benefit-item"><i class="fas fa-check-circle"></i> Level Up Reward: ₹150</div>
                            <div class="benefit-item"><i class="fas fa-check-circle"></i> Monthly Reward: ₹75</div>
                            <div class="benefit-item"><i class="fas fa-check-circle"></i> Higher Withdrawal Limits</div>
                        </div>
                        <button class="claim-reward-btn" id="claim-tier-2" disabled>Claim Reward</button>
                    </div>
                    
                    <div class="vip-tier" id="vip-tier-3">
                        <div class="vip-tier-header">
                            <div class="vip-tier-level vip-3">VIP 3</div>
                            <div class="vip-tier-badge vip-3">3</div>
                        </div>
                        <div class="vip-tier-requirements">Requirement: <span>₹30,000</span> total bet</div>
                        <div class="vip-tier-benefits">
                            <div class="benefit-item"><i class="fas fa-check-circle"></i> Level Up Reward: ₹300</div>
                            <div class="benefit-item"><i class="fas fa-check-circle"></i> Monthly Reward: ₹150</div>
                            <div class="benefit-item"><i class="fas fa-check-circle"></i> Personal Account Manager</div>
                        </div>
                        <button class="claim-reward-btn" id="claim-tier-3" disabled>Claim Reward</button>
                    </div>
                </div>
            </div>
            
            <div class="vip-rewards">
                <h3 class="rewards-title">Monthly Rewards</h3>
                
                <div class="monthly-reward">
                    <div class="reward-info">
                        <h4>VIP Monthly Reward</h4>
                        <p>Claim your monthly VIP bonus</p>
                        <div class="reward-time" id="monthly-timer">Next reward in: 15 days</div>
                    </div>
                    <div class="reward-amount" id="monthly-amount">₹30</div>
                    <button class="reward-claim-btn" id="claim-monthly" disabled>Claim</button>
                </div>
            </div>
        </div>
    </div>
    
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    
    <script>
        // Initialize Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyC5JqJPbyUw-rZgFp67nc0f5svWcoNt5D4",
            authDomain: "club-b8f03.firebaseapp.com",
            databaseURL: "https://club-b8f03-default-rtdb.firebaseio.com",
            projectId: "club-b8f03",
            storageBucket: "club-b8f03.firebasestorage.app",
            messagingSenderId: "115909846985",
            appId: "1:115909846985:web:6f42fbb224935c513cea18",
            measurementId: "G-S3M36PLB9Y"
        };
        
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        
        // Check if user is logged in
        const userPhone = localStorage.getItem('userPhone') || sessionStorage.getItem('userPhone');
        if(!userPhone) {
            window.location.href = "index.html";
        } else {
            // Load user data from Firebase
            loadVIPData();
        }
        
        // VIP tier requirements (in rupees)
        const vipRequirements = {
            1: 3000,
            2: 10000,
            3: 30000
        };
        
        // VIP level up rewards (in rupees)
        const levelUpRewards = {
            1: 60,
            2: 150,
            3: 300
        };
        
        // VIP monthly rewards (in rupees)
        const monthlyRewards = {
            1: 30,
            2: 75,
            3: 150
        };
        
        // Load user VIP data
        function loadVIPData() {
            database.ref('users/' + userPhone).once('value').then((snapshot) => {
                const userData = snapshot.val();
                
                if(userData) {
                    // Set user info
                    const uid = userData.uid || 'MEMBER';
                    document.getElementById('vip-avatar').textContent = uid.charAt(0);
                    document.getElementById('vip-username').textContent = `Mem™${uid}`;
                    document.getElementById('vip-userid').textContent = `Member ID: ${uid}`;
                    
                    // Get VIP data
                    const vipLevel = userData.vipLevel || 1;
                    const totalBet = userData.totalBet || 0;
                    const claimedLevels = userData.claimedLevels || {};
                    const lastMonthlyClaim = userData.lastMonthlyClaim || 0;
                    
                    // Update display
                    updateVIPDisplay(vipLevel, totalBet, claimedLevels, lastMonthlyClaim);
                    
                    // Set up real-time listeners
                    setupVIPListeners();
                    
                    // Start monthly reward timer
                    updateMonthlyTimer(lastMonthlyClaim);
                }
            }).catch((error) => {
                console.error("Error loading VIP data:", error);
                showToast('Error loading VIP data', 'error');
            });
        }
        
        // Set up real-time listeners for VIP data
        function setupVIPListeners() {
            // Listen for total bet changes
            database.ref('users/' + userPhone + '/totalBet').on('value', (snapshot) => {
                const totalBet = snapshot.val() || 0;
                updateVIPProgress(totalBet);
            });
            
            // Listen for VIP level changes
            database.ref('users/' + userPhone + '/vipLevel').on('value', (snapshot) => {
                const vipLevel = snapshot.val() || 1;
                updateVIPLevel(vipLevel);
            });
            
            // Listen for claimed levels changes
            database.ref('users/' + userPhone + '/claimedLevels').on('value', (snapshot) => {
                const claimedLevels = snapshot.val() || {};
                updateClaimButtons(claimedLevels);
            });
            
            // Listen for monthly claim changes
            database.ref('users/' + userPhone + '/lastMonthlyClaim').on('value', (snapshot) => {
                const lastMonthlyClaim = snapshot.val() || 0;
                updateMonthlyTimer(lastMonthlyClaim);
            });
        }
        
        // Update VIP progress display
        function updateVIPProgress(totalBet) {
            const vipLevel = parseInt(document.getElementById('vip-current-level').textContent) || 1;
            let nextLevel = vipLevel;
            let progress = 0;
            
            if (vipLevel < 3) {
                nextLevel = vipLevel + 1;
                const currentRequirement = vipRequirements[vipLevel] || 0;
                const nextRequirement = vipRequirements[nextLevel] || 0;
                progress = Math.min(100, ((totalBet - currentRequirement) / (nextRequirement - currentRequirement)) * 100);
            } else {
                // Max level reached
                nextLevel = 3;
                progress = 100;
            }
            
            // Update progress bar
            document.getElementById('vip-progress-fill').style.width = `${progress}%`;
            
            // Update progress text
            if (vipLevel < 3) {
                const formattedBet = totalBet.toLocaleString('en-IN', {
                    style: 'currency',
                    currency: 'INR',
                    maximumFractionDigits: 0
                });
                
                const formattedReq = vipRequirements[nextLevel].toLocaleString('en-IN', {
                    style: 'currency',
                    currency: 'INR',
                    maximumFractionDigits: 0
                });
                
                document.getElementById('vip-progress-text').textContent = `${formattedBet} / ${formattedReq}`;
                document.getElementById('vip-next-level').textContent = nextLevel;
            } else {
                document.getElementById('vip-progress-text').textContent = "Max Level Reached";
                document.getElementById('vip-next-level').textContent = "MAX";
            }
        }
        
        // Update VIP level display
        function updateVIPLevel(vipLevel) {
            document.getElementById('vip-current-level').textContent = vipLevel;
            
            // Highlight current tier
            document.querySelectorAll('.vip-tier').forEach(tier => {
                tier.classList.remove('active');
            });
            
            if (vipLevel >= 1) {
                document.getElementById('vip-tier-1').classList.add('active');
            }
            if (vipLevel >= 2) {
                document.getElementById('vip-tier-2').classList.add('active');
            }
            if (vipLevel >= 3) {
                document.getElementById('vip-tier-3').classList.add('active');
            }
            
            // Update monthly reward amount
            const monthlyAmount = monthlyRewards[vipLevel] || 0;
            document.getElementById('monthly-amount').textContent = `₹${monthlyAmount}`;
        }
        
        // Update claim buttons based on claimed levels
        function updateClaimButtons(claimedLevels) {
            const vipLevel = parseInt(document.getElementById('vip-current-level').textContent) || 1;
            
            for (let level = 1; level <= 3; level++) {
                const button = document.getElementById(`claim-tier-${level}`);
                
                if (level <= vipLevel && !claimedLevels[level]) {
                    button.disabled = false;
                    button.textContent = "Claim Reward";
                } else if (claimedLevels[level]) {
                    button.disabled = true;
                    button.textContent = "Claimed";
                } else {
                    button.disabled = true;
                    button.textContent = "Locked";
                }
            }
        }
        
        // Update monthly timer and claim button
        function updateMonthlyTimer(lastMonthlyClaim) {
            const now = Date.now();
            const lastClaimTime = lastMonthlyClaim || 0;
            const nextClaimTime = lastClaimTime + (30 * 24 * 60 * 60 * 1000); // 30 days
            
            const monthlyBtn = document.getElementById('claim-monthly');
            
            if (now >= nextClaimTime) {
                // Reward available
                monthlyBtn.disabled = false;
                document.getElementById('monthly-timer').textContent = "Reward available now!";
            } else {
                // Calculate time remaining
                const timeRemaining = nextClaimTime - now;
                const days = Math.floor(timeRemaining / (1000 * 60 * 60 * 24));
                const hours = Math.floor((timeRemaining % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                
                document.getElementById('monthly-timer').textContent = `Next reward in: ${days} days ${hours} hours`;
                monthlyBtn.disabled = true;
            }
        }
        
        // Claim level up reward
        function claimLevelReward(level) {
            const rewardAmount = levelUpRewards[level] || 0;
            
            if (rewardAmount <= 0) {
                showToast('Invalid reward level', 'error');
                return;
            }
            
            // Add reward to balance
            database.ref('users/' + userPhone + '/balance').transaction((balance) => {
                return (balance || 0) + rewardAmount;
            }).then(() => {
                // Mark level as claimed
                database.ref('users/' + userPhone + '/claimedLevels/' + level).set(true);
                
                // Create notification
                createNotification(
                    'VIP Reward Claimed',
                    `You have successfully claimed your VIP ${level} level up reward of ₹${rewardAmount}`,
                    'success'
                );
                
                showToast(`Success! ₹${rewardAmount} added to your balance`, 'success');
            }).catch((error) => {
                console.error("Error claiming reward:", error);
                showToast('Error claiming reward', 'error');
            });
        }
        
        // Claim monthly reward
        function claimMonthlyReward() {
            const vipLevel = parseInt(document.getElementById('vip-current-level').textContent) || 1;
            const rewardAmount = monthlyRewards[vipLevel] || 0;
            
            if (rewardAmount <= 0) {
                showToast('No monthly reward available for your level', 'error');
                return;
            }
            
            // Add reward to balance
            database.ref('users/' + userPhone + '/balance').transaction((balance) => {
                return (balance || 0) + rewardAmount;
            }).then(() => {
                // Update last claim time
                database.ref('users/' + userPhone + '/lastMonthlyClaim').set(Date.now());
                
                // Create notification
                createNotification(
                    'Monthly VIP Reward',
                    `You have claimed your monthly VIP reward of ₹${rewardAmount}`,
                    'success'
                );
                
                showToast(`Success! ₹${rewardAmount} added to your balance`, 'success');
            }).catch((error) => {
                console.error("Error claiming monthly reward:", error);
                showToast('Error claiming monthly reward', 'error');
            });
        }
        
        // Create notification
        function createNotification(title, message, type) {
            const notificationId = 'NOT' + Date.now();
            
            database.ref('notifications/' + userPhone + '/' + notificationId).set({
                title: title,
                message: message,
                type: type,
                timestamp: Date.now(),
                read: false
            });
        }
        
        // Show toast notification
        function showToast(message, type = 'success') {
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.innerHTML = `
                <span class="toast-icon">${type === 'success' ? '✓' : type === 'error' ? '✗' : type === 'warning' ? '⚠' : 'i'}</span>
                ${message}
            `;
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.remove();
            }, 3000);
        }
        
        // Update all VIP display elements
        function updateVIPDisplay(vipLevel, totalBet, claimedLevels, lastMonthlyClaim) {
            updateVIPLevel(vipLevel);
            updateVIPProgress(totalBet);
            updateClaimButtons(claimedLevels);
            updateMonthlyTimer(lastMonthlyClaim);
        }
        
        // Set up button event listeners
        document.getElementById('claim-tier-1').addEventListener('click', () => claimLevelReward(1));
        document.getElementById('claim-tier-2').addEventListener('click', () => claimLevelReward(2));
        document.getElementById('claim-tier-3').addEventListener('click', () => claimLevelReward(3));
        document.getElementById('claim-monthly').addEventListener('click', claimMonthlyReward);
    </script>
</body>
</html>
